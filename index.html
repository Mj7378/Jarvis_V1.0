<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>J.A.R.V.I.S. AI Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
     <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
     <link href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap" rel="stylesheet">
    
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              'orbitron': ['Orbitron', 'sans-serif'],
              'sans': ['Roboto', 'Noto Color Emoji', 'sans-serif'],
            },
            colors: {
              'background': 'var(--color-background)',
              'panel': 'rgba(var(--panel-rgb), 0.85)',
              'text-primary': 'var(--color-text-primary)',
              'text-secondary': 'var(--color-text-secondary)',
              'text-muted': 'var(--color-text-muted)',
              
              'border-primary': 'rgba(var(--primary-color-rgb), 0.2)',
              'border-secondary': 'var(--color-border-secondary)',
              
              'user-bubble': 'rgba(var(--user-bubble-rgb), 0.8)',
              'model-bubble': 'rgba(var(--panel-rgb), 0.7)',

              'disabled-bg': 'var(--color-disabled-bg)',
              'disabled-text': 'var(--color-disabled-text)',

              'primary': 'var(--primary-color-hex)',
              'primary-t-20': 'rgba(var(--primary-color-rgb), 0.2)',
              'primary-t-50': 'rgba(var(--primary-color-rgb), 0.5)',
              'primary-t-80': 'rgba(var(--primary-color-rgb), 0.8)',
              'secondary': 'var(--color-text-secondary)',
            },
            animation: {
              'spin-slow': 'spin 8s linear infinite',
              'spin-medium': 'spin 4s linear infinite',
              'spin-fast': 'spin 2s linear infinite',
              'pulse-strong': 'pulse-strong 2s infinite ease-in-out',
              'pulse-green': 'pulse-green 2s infinite ease-in-out',
              'pulse-speak': 'pulse-speak 1.5s infinite ease-in-out',
              'scan-line': 'scan-line 1.5s ease-in-out infinite',
              'pulse-dot': 'pulse-dot 1.2s infinite ease-in-out',
              'text-flicker': 'text-flicker 150ms infinite',
              'pulse-glow': 'pulse-glow 2.5s infinite ease-in-out',
              'pulse-thinking': 'pulse-thinking 1.5s infinite ease-in-out',
              'pulse-speaking': 'pulse-speaking 1.8s infinite ease-in-out',
              'ping-slow': 'ping 3s cubic-bezier(0, 0, 0.2, 1) infinite',
              'ping-medium': 'ping 2.5s cubic-bezier(0, 0, 0.2, 1) infinite',
              'ping-fast': 'ping 2s cubic-bezier(0, 0, 0.2, 1) infinite',
              'border-trace': 'border-trace 1s ease-out forwards',
              'pop-in': 'pop-in 0.15s ease-out forwards',
              'pop-in-top-right': 'pop-in-top-right 0.15s ease-out forwards',
              'pop-in-center': 'pop-in-center 0.2s ease-out forwards',
              'plot-dot': 'plot-dot 0.3s ease-out forwards',
              'trace-path': 'trace-path 0.5s ease-in-out forwards',
              'data-stream': 'data-stream 1.5s linear infinite',
              'pulse-brain': 'pulse-brain 2.5s infinite ease-in-out',
              'fill-bar': 'fill-bar 2s ease-out forwards',
              'dna-rotate': 'dna-rotate 15s linear infinite',
            },
            keyframes: {
              'pulse-strong': {
                '0%, 100%': { transform: 'scale(1)', opacity: '1', filter: 'brightness(1)' },
                '50%': { transform: 'scale(1.05)', opacity: '0.9', filter: 'brightness(1.5)' },
              },
              'pulse-green': {
                '0%, 100%': { transform: 'scale(1)', boxShadow: '0 0 20px rgba(0, 255, 128, 0.4)' },
                '50%': { transform: 'scale(1.03)', boxShadow: '0 0 35px rgba(0, 255, 128, 0.7)' },
              },
              'pulse-speak': {
                '0%, 100%': { transform: 'scale(1)', boxShadow: '0 0 30px var(--tw-shadow-color)', opacity: 0.7 },
                '50%': { transform: 'scale(1.03)', boxShadow: '0 0 45px var(--tw-shadow-color)', opacity: 1 },
              },
              'scan-line': {
                '0%': { transform: 'translateY(-100%)', opacity: 0 },
                '50%': { opacity: 1 },
                '100%': { transform: 'translateY(100%)', opacity: 0 },
              },
              'pulse-dot': {
                '0%, 100%': { opacity: 0.2, transform: 'scale(0.8)' },
                '50%': { opacity: 1, transform: 'scale(1)' },
              },
              'text-flicker': {
                '0%': { opacity: 1, textShadow: '0 0 10px currentColor' },
                '50%': { opacity: 0.5, textShadow: '0 0 2px currentColor' },
                '100%': { opacity: 1, textShadow: '0 0 10px currentColor' },
              },
              'pulse-glow': {
                '0%, 100%': { boxShadow: '0 0 15px var(--primary-color-hex)', transform: 'scale(1)' },
                '50%': { boxShadow: '0 0 30px var(--primary-color-hex)', transform: 'scale(1.02)' },
              },
              'pulse-thinking': {
                '0%, 100%': { transform: 'scale(1)', boxShadow: '0 0 20px rgba(251, 191, 36, 0.4)' },
                '50%': { transform: 'scale(1.05)', boxShadow: '0 0 40px rgba(251, 191, 36, 0.8)' },
              },
              'pulse-speaking': {
                  '0%, 100%': { transform: 'scale(1)', boxShadow: '0 0 20px rgba(192, 132, 252, 0.4)' },
                  '50%': { transform: 'scale(1.03)', boxShadow: '0 0 35px rgba(192, 132, 252, 0.7)' },
              },
              'border-trace': {
                  'from': { 'stroke-dashoffset': '100%' },
                  'to': { 'stroke-dashoffset': '0%' }
              },
              'pop-in': {
                '0%': { opacity: '0', transform: 'translateY(10px) scale(0.95)' },
                '100%': { opacity: '1', transform: 'translateY(0) scale(1)' },
              },
              'pop-in-top-right': {
                '0%': { opacity: '0', transform: 'translateY(-10px) scale(0.95)' },
                '100%': { opacity: '1', transform: 'translateY(0) scale(1)' },
              },
              'pop-in-center': {
                '0%': { opacity: '0', transform: 'scale(0.95)' },
                '100%': { opacity: '1', transform: 'scale(1)' },
              },
              'plot-dot': {
                '0%': { opacity: '0', r: '0' },
                '70%': { opacity: '1', r: '2.5' },
                '100%': { opacity: '1', r: '1.5' },
              },
              'trace-path': {
                'from': { 'stroke-dashoffset': '50' },
                'to': { 'stroke-dashoffset': '0' },
              },
              'data-stream': {
                  '0%': { transform: 'translateX(-100%)' },
                  '100%': { transform: 'translateX(0%)' },
              },
              'pulse-brain': {
                  '0%, 100%': { filter: 'drop-shadow(0 0 5px currentColor)', opacity: 0.8 },
                  '50%': { filter: 'drop-shadow(0 0 15px currentColor)', opacity: 1 },
              },
              'fill-bar': {
                  'from': { width: '0%' },
                  'to': { width: 'var(--target-width, 100%)' },
              },
              'dna-rotate': {
                  'from': { transform: 'rotate(0deg)' },
                  'to': { transform: 'rotate(360deg)' },
              },
            }
          }
        }
      }
    </script>
    <style type="text/css">
      :root {
        --primary-color-hex: #00ffff;
        --primary-color-rgb: 0, 255, 255;
        --corner-clip-size: clamp(15px, 4vw, 30px);
      }
      
      .theme-dark {
        --color-background: #0A0F1A;
        --color-text-primary: #e2e8f0;
        --color-text-secondary: #93c5fd;
        --color-text-muted: #64748b;
        --panel-rgb: 18, 26, 43;
        --color-border-secondary: rgba(var(--primary-color-rgb), 0.1);
        --user-bubble-rgb: 79, 70, 229;
        --user-bubble-border-rgb: 99, 102, 241;
        --color-disabled-bg: rgba(51, 65, 85, 0.5);
        --color-disabled-text: #64748b;
        --glitch-bg: #0A0F1A;
      }

      .theme-light {
        --color-background: #f1f5f9;
        --color-text-primary: #1e293b;
        --color-text-secondary: #0ea5e9;
        --color-text-muted: #94a3b8;
        --panel-rgb: 255, 255, 255;
        --color-border-secondary: rgba(30, 41, 59, 0.1);
        --user-bubble-rgb: 59, 130, 246;
        --user-bubble-border-rgb: 96, 165, 250;
        --color-disabled-bg: rgba(203, 213, 225, 0.5);
        --color-disabled-text: #94a3b8;
        --glitch-bg: #f1f5f9;
      }

      body {
        font-family: 'Roboto', 'Noto Color Emoji', sans-serif;
        background-color: var(--color-background);
        color: var(--color-text-primary);
        overflow: hidden;
        background-image:
            radial-gradient(ellipse at center, rgba(var(--primary-color-rgb), 0.08) 0%, transparent 70%),
            url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4" viewBox="0 0 4 4"><path fill="%2300ffff" fill-opacity="0.05" d="M1 3h1v1H1V3zm2-2h1v1H3V1z"></path></svg>');
        font-size: clamp(14px, 1.5vw + 0.5rem, 16px);
      }

      @keyframes glimmer {
        0%, 100% { opacity: 0; transform: scale(0.5); }
        50% { opacity: 1; }
        75% { opacity: 0.5; transform: scale(1.2); }
      }
      .glimmer-layer {
          position: fixed;
          top: 0; left: 0; width: 100%; height: 100%;
          pointer-events: none;
          z-index: -1;
      }
      .glimmer-layer .dot {
          position: absolute;
          width: 3px; height: 3px;
          background: var(--primary-color-hex);
          border-radius: 50%;
          filter: blur(1px);
          animation: glimmer 10s infinite ease-in-out;
      }

      .styled-scrollbar::-webkit-scrollbar {
        width: 8px;
      }
      .styled-scrollbar::-webkit-scrollbar-track {
        background: transparent;
      }
      .styled-scrollbar::-webkit-scrollbar-thumb {
        background-color: rgba(var(--primary-color-rgb), 0.3);
        border-radius: 10px;
        border: 2px solid transparent;
        background-clip: content-box;
      }
      .styled-scrollbar::-webkit-scrollbar-thumb:hover {
        background-color: rgba(var(--primary-color-rgb), 0.5);
      }
      
      .holographic-panel {
        background: rgba(var(--panel-rgb), 0.1);
        backdrop-filter: blur(12px) saturate(120%);
        -webkit-backdrop-filter: blur(12px) saturate(120%);
        border: 1px solid rgba(var(--primary-color-rgb), 0.15);
        box-shadow: 
            0 0 30px rgba(var(--primary-color-rgb), 0.05),
            inset 0 0 10px rgba(var(--primary-color-rgb), 0.05);
        padding: clamp(0.75rem, 3vw, 1.25rem);
        position: relative;
        transition: all 0.3s ease;
      }

      .holographic-panel:hover {
        transform: translateY(-2px);
        box-shadow: 
            0 0 45px rgba(var(--primary-color-rgb), 0.1),
            inset 0 0 15px rgba(var(--primary-color-rgb), 0.08);
      }

      .holographic-panel::before {
        content: '';
        position: absolute;
        inset: 0;
        border: 1px solid rgba(var(--primary-color-rgb), 0.3);
        pointer-events: none;
        clip-path: var(--clip-path);
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      .holographic-panel:hover::before {
        opacity: 1;
      }

      /* Animated border path */
      .holographic-panel svg.border-path {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        pointer-events: none;
        stroke: var(--primary-color-hex);
        stroke-width: 2;
        fill: none;
        stroke-dasharray: 100%;
        stroke-dashoffset: 100%;
        animation: border-trace 1s ease-out forwards 0.3s;
      }

      
      .panel-title {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-family: 'Orbitron', sans-serif;
        font-size: 1rem;
        color: var(--color-text-secondary);
        margin-bottom: 0.75rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid var(--border-primary);
      }
      
      /* --- UNIVERSAL FLUID LAYOUT --- */
      .hud-container {
        display: grid;
        width: 100%;
        max-width: 1440px; /* Constrain width on large screens */
        height: 100dvh;
        margin-left: auto; /* Center horizontally */
        margin-right: auto; /* Center horizontally */
        padding: clamp(0.25rem, 2vw, 1rem);
        gap: clamp(0.25rem, 2vw, 1rem);
        overflow: hidden;
        
        grid-template-columns: 1fr;
        grid-template-rows: auto minmax(0, 1fr) auto; /* Allow chat to shrink and grow */
        grid-template-areas:
            "header"
            "chat"
            "input";
      }

      .hud-header { 
        grid-area: header; 
        position: relative; 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
      }
      
      .hud-chat-panel {
          grid-area: chat;
          display: flex;
          flex-direction: column;
          min-height: 0; /* Critical for flex + scroll */
      }
      
      .hud-bottom-panel { 
        grid-area: input; 
        position: relative;
      }
      
      @keyframes fade-in-fast {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-fade-in-fast {
        animation: fade-in-fast 0.4s ease-out forwards;
      }
      
      /* --- Responsive Component Styles --- */
      .header-title-panel {
          --clip-size: clamp(15px, 4vw, 25px);
          clip-path: polygon(0 0, calc(100% - var(--clip-size)) 0, 100% 50%, calc(100% - var(--clip-size)) 100%, 0 100%);
          padding-left: clamp(0.75rem, 4vw, 1.5rem);
          padding-right: clamp(0.75rem, 4vw, 1.5rem);
      }
      .header-title-wedge {
          width: clamp(15px, 4vw, 25px);
          clip-path: polygon(0 50%, 100% 0, 100% 100%);
      }
      
      .settings-modal-container {
          width: clamp(280px, 90vw, 380px);
          margin: clamp(0.5rem, 2vw, 1rem);
      }

      .toggle-label {
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        width: 44px;
        height: 24px;
        background: rgba(var(--primary-color-rgb), 0.1);
        border: 1px solid rgba(var(--primary-color-rgb), 0.3);
        border-radius: 100px;
        position: relative;
        transition: background-color .2s;
      }
      .theme-light .toggle-label {
        background-color: #e2e8f0; border-color: #cbd5e1;
      }
      .toggle-label .toggle-dot {
        content: '';
        position: absolute;
        top: 2px; left: 2px; width: 18px; height: 18px;
        border-radius: 45px;
        transition: 0.2s;
        background: rgba(var(--primary-color-rgb), 0.5);
        box-shadow: 0 0 2px 0 rgba(10, 10, 10, 0.29);
      }
      .theme-light .toggle-label .toggle-dot {
        background-color: #f8fafc;
      }
      .toggle-checkbox:checked + .toggle-label {
        background: rgba(var(--primary-color-rgb), 0.4);
      }
      .theme-light .toggle-checkbox:checked + .toggle-label {
        background-color: var(--primary-color-hex);
      }
      .toggle-checkbox:checked + .toggle-label .toggle-dot {
        left: calc(100% - 2px);
        transform: translateX(-100%);
        background: var(--primary-color-hex);
      }
      .theme-light .toggle-checkbox:checked + .toggle-label .toggle-dot {
        background-color: white;
      }

      .glitch {
        position: relative;
        text-shadow: 0.05em 0 0 rgba(var(--primary-color-rgb), 0.75), -0.025em -0.05em 0 rgba(255, 0, 0, 0.75), 0.025em 0.05em 0 rgba(0, 0, 255, 0.75);
        animation: glitch 500ms infinite;
      }
      .glitch::before, .glitch::after {
        content: attr(data-text);
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        background: var(--glitch-bg);
        overflow: hidden;
      }
      .glitch::before {
        left: 2px;
        text-shadow: -2px 0 #ff00ff;
        animation: glitch-anim-1 2s infinite linear alternate-reverse;
      }
      .glitch::after {
        left: -2px;
        text-shadow: -2px 0 var(--primary-color-hex), 2px 2px #ff00ff;
        animation: glitch-anim-2 2s infinite linear alternate-reverse;
      }
      @keyframes glitch { 0%, 100% { transform: translate(0); } 20% { transform: translate(-3px, 3px); } 40% { transform: translate(-3px, -3px); } 60% { transform: translate(3px, 3px); } 80% { transform: translate(3px, -3px); } }
      @keyframes glitch-anim-1 { 0% { clip-path: polygon(0 2%, 100% 2%, 100% 5%, 0 5%); } 10% { clip-path: polygon(0 40%, 100% 40%, 100% 45%, 0 45%); } 20% { clip-path: polygon(0 20%, 100% 20%, 100% 22%, 0 22%); } 30% { clip-path: polygon(0 60%, 100% 60%, 100% 62%, 0 62%); } 40% { clip-path: polygon(0 85%, 100% 85%, 100% 88%, 0 88%); } 50% { clip-path: polygon(0 50%, 100% 50%, 100% 52%, 0 52%); } 60% { clip-path: polygon(0 10%, 100% 10%, 100% 12%, 0 12%); } 70% { clip-path: polygon(0 70%, 100% 70%, 100% 72%, 0 72%); } 80% { clip-path: polygon(0 95%, 100% 95%, 100% 99%, 0 99%); } 90% { clip-path: polygon(0 30%, 100% 30%, 100% 32%, 0 32%); } 100% { clip-path: polygon(0 55%, 100% 55%, 100% 58%, 0 58%); } }
      @keyframes glitch-anim-2 { 0% { clip-path: polygon(0 5%, 100% 5%, 100% 6%, 0 6%); } 15% { clip-path: polygon(0 30%, 100% 30%, 100% 33%, 0 33%); } 25% { clip-path: polygon(0 90%, 100% 90%, 100% 95%, 0 95%); } 40% { clip-path: polygon(0 50%, 100% 50%, 100% 52%, 0 52%); } 55% { clip-path: polygon(0 22%, 100% 22%, 100% 25%, 0 25%); } 68% { clip-path: polygon(0 75%, 100% 75%, 100% 78%, 0 78%); } 75% { clip-path: polygon(0 42%, 100% 42%, 100% 45%, 0 45%); } 88% { clip-path: polygon(0 65%, 100% 65%, 100% 69%, 0 69%); } 100% { clip-path: polygon(0 15%, 100% 15%, 100% 18%, 0 18%); } }

      @keyframes snap-disintegration {
        0% { opacity: 1; transform: scale(1); filter: blur(0px) saturate(1); }
        50% { opacity: 0.9; transform: scale(1.01) skew(-3deg, 2deg); filter: blur(1px) saturate(2) brightness(1.5); }
        100% { opacity: 0; transform: scale(0.6) skew(5deg, -5deg) translate(100px, -150px); filter: blur(20px) saturate(0); }
      }
      .system-terminating > * {
        animation: snap-disintegration 2s forwards cubic-bezier(0.55, 0.085, 0.68, 0.53);
        transform-origin: 50% 50%;
        will-change: transform, opacity, filter;
        pointer-events: none;
      }
      
      .system-terminating .hud-core-container { animation-delay: 0.1s; }
      .system-terminating .hud-left-panel { animation-delay: 0.5s; }
      .system-terminating .hud-bottom-panel { animation-delay: 0.7s; }
      .system-terminating .hud-header { animation-delay: 0.9s; }

      .scanline-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        pointer-events: none;
        background: linear-gradient(to bottom, rgba(var(--primary-color-rgb), 0.04) 1px, transparent 1px);
        background-size: 100% 3px;
        animation: scanline-flicker 20s linear infinite;
        z-index: 100;
        opacity: 0.4;
      }
      @keyframes scanline-flicker {
          0%, 100% { opacity: 0.4; }
          50% { opacity: 0.3; }
      }
      
      .core-container svg {
          overflow: visible;
          transform-origin: center;
      }
      @keyframes rotate-360 { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      @keyframes rotate-360-rev { from { transform: rotate(360deg); } to { transform: rotate(0deg); } }
      @keyframes pulse-glow-strong {
        0%, 100% { filter: drop-shadow(0 0 5px var(--glow-color)); }
        50% { filter: drop-shadow(0 0 25px var(--glow-color)); }
      }
      .core-ring { animation: rotate-360 20s linear infinite; }
      .core-ring-fast { animation: rotate-360 10s linear infinite; }
      .core-ring-rev { animation: rotate-360-rev 15s linear infinite; }

      [contenteditable="true"]:empty::before {
        content: attr(data-placeholder);
        pointer-events: none;
        display: block; /* For a correct styling */
        color: var(--color-text-muted);
        opacity: 0.6;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.15.0",
    "react-syntax-highlighter": "https://aistudiocdn.com/react-syntax-highlighter@^15.6.6",
    "react-syntax-highlighter/": "https://aistudiocdn.com/react-syntax-highlighter@^15.6.6/"
  }
}
</script>
</head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div class="glimmer-layer"></div>
    <div class="scanline-overlay"></div>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
    <script>
      // Glimmer effect script
      const glimmerLayer = document.querySelector('.glimmer-layer');
      const createGlimmer = () => {
        if (!glimmerLayer) return;
        const dot = document.createElement('div');
        dot.className = 'dot';
        dot.style.left = `${Math.random() * 100}vw`;
        dot.style.top = `${Math.random() * 100}vh`;
        dot.style.animationDuration = `${Math.random() * 5 + 5}s`;
        dot.style.animationDelay = `${Math.random() * 5}s`;
        glimmerLayer.appendChild(dot);
        setTimeout(() => dot.remove(), 10000);
      };
      setInterval(createGlimmer, 500);
    </script>
  </body>
</html>