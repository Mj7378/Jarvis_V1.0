<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>J.A.R.V.I.S. AI Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
     <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
     <link href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap" rel="stylesheet">
    
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              'orbitron': ['Orbitron', 'sans-serif'],
              'sans': ['Roboto', 'Noto Color Emoji', 'sans-serif'],
            },
            colors: {
              'background': 'var(--color-background)',
              'panel': 'rgba(var(--panel-rgb), 0.85)',
              'text-primary': 'var(--color-text-primary)',
              'text-secondary': 'var(--color-text-secondary)',
              'text-muted': 'var(--color-text-muted)',
              
              'border-primary': 'rgba(var(--primary-color-rgb), 0.2)',
              'border-secondary': 'var(--color-border-secondary)',
              
              'user-bubble': 'rgba(var(--user-bubble-rgb), 0.8)',
              'model-bubble': 'rgba(var(--panel-rgb), 0.7)',

              'disabled-bg': 'var(--color-disabled-bg)',
              'disabled-text': 'var(--color-disabled-text)',

              'primary': 'var(--primary-color-hex)',
              'primary-t-20': 'rgba(var(--primary-color-rgb), 0.2)',
              'primary-t-50': 'rgba(var(--primary-color-rgb), 0.5)',
              'primary-t-80': 'rgba(var(--primary-color-rgb), 0.8)',
              'secondary': 'var(--color-text-secondary)',
            },
            animation: {
              'spin-slow': 'spin 8s linear infinite',
              'spin-medium': 'spin 4s linear infinite',
              'spin-fast': 'spin 2s linear infinite',
              'pulse-strong': 'pulse-strong 2s infinite ease-in-out',
              'pulse-green': 'pulse-green 2s infinite ease-in-out',
              'pulse-speak': 'pulse-speak 1.5s infinite ease-in-out',
              'scan-line': 'scan-line 1.5s ease-in-out infinite',
              'pulse-dot': 'pulse-dot 1.2s infinite ease-in-out',
              'text-flicker': 'text-flicker 2.5s infinite linear',
              'pulse-glow': 'pulse-glow 2.5s infinite ease-in-out',
              'pulse-thinking': 'pulse-thinking 1.5s infinite ease-in-out',
              'pulse-speaking': 'pulse-speaking 1.8s infinite ease-in-out',
              'ping-slow': 'ping 3s cubic-bezier(0, 0, 0.2, 1) infinite',
              'ping-medium': 'ping 2.5s cubic-bezier(0, 0, 0.2, 1) infinite',
              'ping-fast': 'ping 2s cubic-bezier(0, 0, 0.2, 1) infinite',
              'border-trace': 'border-trace 0.8s ease-out forwards',
              'pop-in': 'pop-in 0.15s ease-out forwards',
              'pop-in-top-right': 'pop-in-top-right 0.15s ease-out forwards',
              'pop-out-top-right': 'pop-out-top-right 0.3s ease-in forwards',
              'pop-in-center': 'pop-in-center 0.2s ease-out forwards',
              'fade-in-fast': 'fade-in 0.2s ease-out forwards',
              'slide-in-right': 'slide-in-right 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards',
              'core-breathing': 'core-breathing 2s infinite ease-in-out',
            },
            keyframes: {
                'border-trace': {
                  '0%': { 'clip-path': 'polygon(0 0, 0 0, 0 100%, 0 100%)' },
                  '25%': { 'clip-path': 'polygon(0 0, 100% 0, 100% 0, 0 0, 0 100%, 0 100%)' },
                  '50%': { 'clip-path': 'polygon(0 0, 100% 0, 100% 100%, 100% 100%, 0 100%, 0 100%)' },
                  '75%': { 'clip-path': 'polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 100%, 0 100%)' },
                  '100%': { 'clip-path': 'polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 0, 100% 0)' },
                },
                'core-breathing': {
                  '0%, 100%': { transform: 'scale(1)', opacity: 0.8 },
                  '50%': { transform: 'scale(1.05)', opacity: 1 },
                },
                'slide-in-right': {
                    '0%': { transform: 'translateX(100%)', opacity: '0' },
                    '100%': { transform: 'translateX(0)', opacity: '1' },
                },
                'fade-in': { from: { opacity: '0' }, to: { opacity: '1' } },
                'pulse-strong': { '0%, 100%': { transform: 'scale(1)', opacity: '1' }, '50%': { transform: 'scale(1.05)', opacity: '0.9' } },
                'pulse-dot': { '0%, 100%': { opacity: '0.5' }, '50%': { opacity: '1' } },
                'text-flicker': { 
                  '0%': { opacity: 1 },
                  '3%': { opacity: 0.8 },
                  '4%': { opacity: 1 },
                  '6%': { opacity: 0.7 },
                  '7%': { opacity: 1 },
                  '15%': { opacity: 1 },
                  '16%': { opacity: 0.5 },
                  '17%': { opacity: 1 },
                  '100%': { opacity: 1 },
                },
                'pulse-glow': { '0%, 100%': { boxShadow: '0 0 15px rgba(var(--primary-color-rgb), 0.5)' }, '50%': { boxShadow: '0 0 25px rgba(var(--primary-color-rgb), 0.8)' } },
                'pop-in': {
                    '0%': { transform: 'scale(0.95)', opacity: '0' },
                    '100%': { transform: 'scale(1)', opacity: '1' },
                },
                'pop-in-top-right': {
                    '0%': { transform: 'scale(0.9) translateX(20px)', opacity: '0' },
                    '100%': { transform: 'scale(1) translateX(0)', opacity: '1' },
                },
                'pop-out-top-right': {
                    '0%': { transform: 'scaleY(1) translateX(0)', opacity: '1', transformOrigin: 'top' },
                    '100%': { transform: 'scaleY(0) translateX(20px)', opacity: '0', transformOrigin: 'top' },
                },
                'pop-in-center': {
                    '0%': { transform: 'scale(0.95)', opacity: '0' },
                    '100%': { transform: 'scale(1)', opacity: '1' },
                },
            }
          }
        }
      }
    </script>
    <style>
      :root {
        --color-background: #0d1117;
        --panel-rgb: 23, 27, 41;
        --primary-color-hex: #00ffff;
        --primary-color-rgb: 0, 255, 255;
        --color-text-primary: #e6f1ff;
        --color-text-secondary: #79c0ff;
        --color-text-muted: #8b949e;
        --user-bubble-rgb: 0, 255, 255;
        --color-disabled-bg: #21262d;
        --color-disabled-text: #8b949e;
      }
      body {
        background-color: var(--color-background);
        color: var(--color-text-primary);
        font-family: 'Roboto', sans-serif;
        overflow: hidden;
      }
      /* Main application grid */
      .hud-grid-container {
        height: 100vh;
        height: 100svh; /* More accurate for mobile */
        display: grid;
        grid-template-rows: auto 1fr;
        grid-template-columns: 72px 1fr;
        grid-template-areas:
          "header header"
          "sidebar main";
        gap: 1rem;
        padding: 1rem;
      }
      .hud-header { grid-area: header; }
      .hud-sidebar-dock { grid-area: sidebar; }

      /* Main content area is a flex column to separate input from the rest */
      .hud-main-content { 
        grid-area: main;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        min-height: 0;
        min-width: 0; /* Prevents content overflow from breaking the grid */
      }

      /* This new container holds the chat log and side panels */
      .hud-center-stage {
        flex-grow: 1; /* Takes up all available vertical space */
        min-height: 0;
        display: grid;
        gap: 1rem;
        grid-template-columns: 1fr 0; /* Default: panel column has 0 width */
        transition: grid-template-columns 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .hud-center-stage.panels-open {
        grid-template-columns: 1fr 450px; /* Panel column expands */
      }

      .chat-log-area { 
        grid-column: 1 / 2; /* Always in the first column */
        min-height: 0;
        display: flex;
        flex-direction: column;
      }
      .panels-area { 
        grid-column: 2 / 3; /* Always in the second column */
        min-height: 0;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        overflow: hidden; /* Important for hiding content during animation */
      }
      /* The user-input-area no longer needs special grid properties */
      .user-input-area {}
      
      .holographic-panel {
        background-image: 
          linear-gradient(rgba(var(--primary-color-rgb), 0.05) 1px, transparent 1px),
          linear-gradient(90deg, rgba(var(--primary-color-rgb), 0.05) 1px, transparent 1px);
        background-size: 20px 20px;
        background-position: center center;
        background-color: rgba(var(--panel-rgb), 0.85);
        border: 1px solid rgba(var(--primary-color-rgb), 0.2);
        border-radius: 0.75rem;
        box-shadow: 0 0 15px rgba(var(--primary-color-rgb), 0.1);
        padding: 1rem;
        position: relative;
        overflow: hidden;
      }
      .holographic-panel::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 0.75rem;
        border: 1px solid var(--primary);
        animation: border-trace 0.8s ease-out forwards;
        animation-delay: 0.1s;
      }

      .panel-title {
        font-family: 'Orbitron', sans-serif;
        color: var(--color-text-secondary);
        display: flex;
        align-items: center;
        gap: 0.75rem;
        border-bottom: 1px solid rgba(var(--primary-color-rgb), 0.2);
        padding-bottom: 0.5rem;
        margin-bottom: 1rem;
        text-shadow: 0 0 5px rgba(var(--primary-color-rgb), 0.5);
      }
      .styled-scrollbar::-webkit-scrollbar { width: 6px; }
      .styled-scrollbar::-webkit-scrollbar-track { background: transparent; }
      .styled-scrollbar::-webkit-scrollbar-thumb { background: rgba(var(--primary-color-rgb), 0.5); border-radius: 3px; }
      .styled-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(var(--primary-color-rgb), 0.8); }
      .toggle-label {
        display: block;
        width: 44px;
        height: 24px;
        background-color: #374151;
        border-radius: 9999px;
        position: relative;
        transition: background-color 0.2s ease;
        cursor: pointer;
      }
      .toggle-dot {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 20px;
        height: 20px;
        background-color: white;
        border-radius: 9999px;
        transition: transform 0.2s ease;
      }
      .toggle-checkbox:checked + .toggle-label { background-color: var(--primary); }
      .toggle-checkbox:checked + .toggle-label .toggle-dot { transform: translateX(20px); }
      
      .dock-button {
        width: 3.5rem; /* 56px */
        height: 3.5rem;
      }
      .dock-button svg {
        width: 1.75rem; /* 28px */
        height: 1.75rem;
      }
      .user-input-area form {
        transition: padding 0.3s ease;
      }

      /* Accessibility */
      *:focus-visible {
        outline: 2px solid var(--primary);
        outline-offset: 2px;
        border-radius: 4px;
      }

      /* Responsiveness */
      /* Tablet and smaller */
      @media (max-width: 1024px) {
        .hud-grid-container {
          grid-template-rows: auto 1fr;
          grid-template-columns: 1fr;
          grid-template-areas:
            "header"
            "main";
        }

        .hud-sidebar-dock {
          grid-area: unset;
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          height: 68px;
          flex-direction: row;
          justify-content: space-around;
          align-items: center;
          background: rgba(var(--panel-rgb), 0.95);
          border-top: 1px solid rgba(var(--primary-color-rgb), 0.2);
          z-index: 45;
          padding: 0 1rem;
        }
        
        .dock-button {
            width: 52px;
            height: 52px;
        }
        .dock-button svg {
            width: 26px;
            height: 26px;
        }
        
        .hud-sidebar-dock .group .absolute {
            top: auto;
            bottom: 110%;
            left: 50% !important;
            transform: translateX(-50%);
        }

        .hud-main-content {
          padding-bottom: calc(68px + 1rem);
        }

        .hud-center-stage.panels-open {
            grid-template-columns: 1fr 350px; /* Smaller panel on tablet */
        }

        .xl\\:flex {
            display: none; /* Hide weather widget on tablets and smaller */
        }
      }
      
      /* Phone layout */
      @media (max-width: 768px) {
        .hud-grid-container {
          padding: 0.5rem;
          gap: 0.5rem;
        }

        .hud-sidebar-dock {
          height: 60px;
          padding: 0 0.5rem;
        }

        .dock-button {
            width: 44px;
            height: 44px;
        }
        .dock-button svg {
            width: 22px;
            height: 22px;
        }

        .hud-main-content {
          padding-bottom: calc(60px + 0.5rem); 
        }
        
        /* On phones, panels take over the whole screen */
        .hud-center-stage {
            display: flex;
        }
        .hud-center-stage.panels-open .chat-log-area {
            display: none;
        }
        .hud-center-stage.panels-open .panels-area {
            width: 100%;
        }
        .panels-area {
           width: 0;
           padding: 0;
           transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .panels-area > .animate-slide-in-right {
           animation: fade-in 0.3s ease-out forwards;
        }
        
        /* Tweak header on small phones */
        .hud-header .w-48 { /* Logo */
            width: 9rem; 
        }
        .system-clock {
            gap: 0.5rem;
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }
        .time-display {
            font-size: 1.1rem;
        }
        .ampm-display {
            font-size: 0.8rem;
            margin-left: 0.25rem;
        }
        .seconds-dial {
            width: 36px;
            height: 36px;
        }
        .seconds-text {
            font-size: 0.9rem;
        }
        .header-controls {
            gap: 0.5rem;
            padding-left: 0.5rem;
            padding-right: 0.25rem;
        }
        .header-control-button {
            width: 38px;
            height: 38px;
        }
        .header-control-button svg {
            width: 20px;
            height: 20px;
        }
        
        /* Tweak user input area */
        .user-input-area form {
            padding: 0.25rem;
            gap: 0.25rem;
        }
        .user-input-area form button[aria-label="Emoji"],
        .user-input-area form button[aria-label="Attachments"] {
            width: 38px;
            height: 38px;
        }
        .user-input-area form button[aria-label="Emoji"] > svg,
        .user-input-area form button[aria-label="Attachments"] > svg {
            width: 22px;
            height: 22px;
        }
        .user-input-area textarea {
            font-size: 1rem;
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            min-height: 38px;
        }
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.16.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react-syntax-highlighter/": "https://aistudiocdn.com/react-syntax-highlighter@^15.6.6/",
    "react-syntax-highlighter": "https://aistudiocdn.com/react-syntax-highlighter@^15.6.6",
    "@mediapipe/tasks-vision": "https://aistudiocdn.com/@mediapipe/tasks-vision@^0.10.22-rc.20250304"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <div class="scanline-overlay" style="display: none;"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>